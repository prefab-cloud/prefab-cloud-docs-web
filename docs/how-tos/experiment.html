<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-how-tos/experiment" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Experiments &amp; AB Test | Prefab Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.prefab.cloud/docs/how-tos/experiment"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Experiments &amp; AB Test | Prefab Documentation"><meta data-rh="true" name="description" content="Using Prefab for Experimentation &amp; AB Testing"><meta data-rh="true" property="og:description" content="Using Prefab for Experimentation &amp; AB Testing"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.prefab.cloud/docs/how-tos/experiment"><link data-rh="true" rel="alternate" href="https://docs.prefab.cloud/docs/how-tos/experiment" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.prefab.cloud/docs/how-tos/experiment" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://I4HO5HDPCF-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CB91P8FVG3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-CB91P8FVG3",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Prefab Documentation" href="/opensearch.xml">

<link rel="preconnect" href="https://pwh.prefab.cloud">
<script>!function(t,e){var o,s,r,a;e.__SV||(window.posthog=e,e._i=[],e.init=function(n,p,i){function c(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(r=t.createElement("script")).type="text/javascript",r.async=!0,r.src=p.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(a=t.getElementsByTagName("script")[0]).parentNode.insertBefore(r,a);var u=e;for(void 0!==i?u=e[i]=[]:i="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==i&&(e+="."+i),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getActiveMatchingSurveys getSurveys onSessionId".split(" "),s=0;s<o.length;s++)c(u,o[s]);e._i.push([n,p,i])},e.__SV=1)}(document,window.posthog||[]),posthog.init("phc_zbGOXnt4C5OR1aKcUFyH5DgA4N0h5wOsWIsPeAuu24B",{api_host:"https://pwh.prefab.cloud",id:"default"})</script>

<script id="hs-script-loader" async defer="defer" src="//js.hs-scripts.com/465416.js"></script><link rel="stylesheet" href="/assets/css/styles.56d3d687.css">
<script src="/assets/js/runtime~main.ecac6b15.js" defer="defer"></script>
<script src="/assets/js/main.0fae58c8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.prefab.cloud/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/logo.svg" alt="Prefab Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Prefab Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link text-white navbar__link--active" href="/">Prefab Docs Home</a><a href="https://app.prefab.cloud/users/sign_up" target="_blank" rel="noopener noreferrer" class="navbar__link">Create Account</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/tutorials">Tutorials</a><button aria-label="Expand sidebar category &#x27;Tutorials&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/explanations">Explanations</a><button aria-label="Collapse sidebar category &#x27;Explanations&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/features">Features</a><button aria-label="Expand sidebar category &#x27;Features&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/concepts">Concepts</a><button aria-label="Expand sidebar category &#x27;Concepts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/architecture">Architecture</a><button aria-label="Expand sidebar category &#x27;Architecture&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/how-tos">How Tos</a><button aria-label="Collapse sidebar category &#x27;How Tos&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how-tos/beta-releases">Beta Releases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/how-tos/experiment">Experiments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how-tos/feature-opt-in">Feature Opt-In</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how-tos/offline-mode">Offline Mode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how-tos/rollouts">Rollouts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how-tos/tracking-ids">Tracking IDs</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/tools">Tools</a><button aria-label="Expand sidebar category &#x27;Tools&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/sdks">SDKs</a><button aria-label="Collapse sidebar category &#x27;SDKs&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdks/elixir">Elixir</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdks/go">Go</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdks/java">Java</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdks/javascript">JavaScript</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/sdks/node">Node</a><button aria-label="Collapse sidebar category &#x27;Node&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdks/node/netlify">Netlify</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdks/python">Python</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdks/react-native">React Native</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdks/react">React</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdks/ruby">Ruby</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/how-tos"><span itemprop="name">How Tos</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Experiments</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Experiments &amp; AB Test</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-prefab-for-experimentation--ab-testing">Using Prefab for Experimentation &amp; AB Testing<a href="#using-prefab-for-experimentation--ab-testing" class="hash-link" aria-label="Direct link to Using Prefab for Experimentation &amp; AB Testing" title="Direct link to Using Prefab for Experimentation &amp; AB Testing">​</a></h2>
<p>There are 4 parts to running experiments:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-bucketing">1) Bucketing<a href="#1-bucketing" class="hash-link" aria-label="Direct link to 1) Bucketing" title="Direct link to 1) Bucketing">​</a></h3>
<p>What arm of the experiment should a user be in? The control or a treatment? Sometimes this is a simple 50/50 split. Sometimes you want to take into account a &quot;holdout group&quot; or a &quot;never experiment on these users&quot; group. Sometimes you only want to experiment on Paid CPC traffic or some other user characteristic. Sometimes you want to experiment on a team level instead of user level. Or perhaps experiment by infrastructure instance. All of these questions are answered by &quot;bucketing&quot;.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-exposure-tracking">2) Exposure Tracking<a href="#2-exposure-tracking" class="hash-link" aria-label="Direct link to 2) Exposure Tracking" title="Direct link to 2) Exposure Tracking">​</a></h3>
<p>Now that we know which bucket the user is in, we need to write this down someplace. It&#x27;s important to think of this separately from bucketing. A common mistake can occur when the code that evaluates buckets automatically records the exposure. Imagine experimenting with the contents of a modal. The underlying page will have made the request to get the experiment buckets, but we shouldn&#x27;t record <strong>exposure</strong> until the modal is actually rendered.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-conversion--metric-tracking">3) Conversion / Metric Tracking<a href="#3-conversion--metric-tracking" class="hash-link" aria-label="Direct link to 3) Conversion / Metric Tracking" title="Direct link to 3) Conversion / Metric Tracking">​</a></h3>
<p>Conversion tracking is where we track <code>order-placed</code> or <code>add-to-cart</code> or <code>cpu-usage</code> or whatever the goal of our experiment is. This is likely already in your system of record.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-analysis">4) Analysis<a href="#4-analysis" class="hash-link" aria-label="Direct link to 4) Analysis" title="Direct link to 4) Analysis">​</a></h3>
<p>This is the big one. We need a tool that will look at our funnel from Exposure to Conversion. We are almost certainly going to want to be able to segment the data and slice and dice. We are making business decisions based on the results here, so we should do analysis in the source of truth. This is often the data warehouse and whatever analysis tool you have on top of it, but it may also be your product analytics suite.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-prefab-approach">The Prefab Approach<a href="#the-prefab-approach" class="hash-link" aria-label="Direct link to The Prefab Approach" title="Direct link to The Prefab Approach">​</a></h2>
<p>Prefab is designed to give you a terrific solution to <strong>targeting &amp; bucketing</strong>, that works with <strong>your existing analysis tool</strong>. In order to do AB test analysis inside a FeatureFlag tool, you would need to extract the conversion data and analysis segments from your source of truth and ingest them in the FeatureFlag tool. While not impossible, this leads to multiple sources of truth and conflicting results. So choose the analysis tool that works for your org and Prefab will turn it into an experiment machine.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="example---setting-up-an-experiment-in-mixpanel">Example - Setting up an Experiment in Mixpanel<a href="#example---setting-up-an-experiment-in-mixpanel" class="hash-link" aria-label="Direct link to Example - Setting up an Experiment in Mixpanel" title="Direct link to Example - Setting up an Experiment in Mixpanel">​</a></h2>
<p>Let&#x27;s walk through an example of adding experimentation to Mixpanel by bucketing users in Prefab.</p>
<p>First we&#x27;ll create a new experiment: <code>experiment.ex-2.bigger-button</code>. We&#x27;ll do it as type <code>string</code> rather than a boolean so that we can have nice <code>Control</code> and <code>Treatment</code> variants (and leave ourselves the option of a <code>Holdout</code> option).
<img decoding="async" loading="lazy" alt="image" src="/assets/images/exp-prefab-create-1a6327f1aa09a4073020d69dcf61d767.jpg" width="1820" height="669" class="img_ev3q">
Next we&#x27;ll add these <code>Control</code> and <code>Treatment</code> variants.
<img decoding="async" loading="lazy" alt="image" src="/assets/images/exp-prefab-variants-42157b2e6806f438bc8a8d88d28525a1.jpg" width="1812" height="483" class="img_ev3q">
We&#x27;ll select <code>Perent Rollout</code> for the value.
<img decoding="async" loading="lazy" alt="image" src="/assets/images/exp-prefab-percent-rollout-89315e6921d16657f51fcee74b8e8446.jpg" width="1813" height="507" class="img_ev3q">
We can choose to &quot;split evenly&quot;. Note the sticky property. This tells us which piece of <a href="/docs/explanations/concepts/context">Context</a> to use to seed the random bucket generator. Our application sets context like <code>{user: {key: &#x27;123-45f&#x27;, name: &#x27;Bob Beemer&#x27;}}</code> so <code>user.key</code> is the correct way to be sticky here. This will ensure that any user that is bucketed into the <code>Treatment</code> stays in the treatment everytime they use the application.
<img decoding="async" loading="lazy" alt="image" src="/assets/images/exp-prefab-split-evenly-dafdd4c7907e7e4a3827f89ca301592f.jpg" width="1373" height="448" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-exposure-tracking-mixpanel-example">Setting up Exposure Tracking (Mixpanel example)<a href="#setting-up-exposure-tracking-mixpanel-example" class="hash-link" aria-label="Direct link to Setting up Exposure Tracking (Mixpanel example)" title="Direct link to Setting up Exposure Tracking (Mixpanel example)">​</a></h3>
<p>Mixpanel has specific event format for <a href="https://docs.mixpanel.com/docs/reports/apps/experiments#add-experiments-to-an-implementation" target="_blank" rel="noopener noreferrer">tracking experiment exposures</a>. When we expose a user to an experiment, we just need to call <code>mixpanel.track(&#x27;$experiment_started&#x27;, {&#x27;Experiment name&#x27;: &#x27;Test&#x27;, &#x27;Variant name&#x27;: &#x27;v1&#x27;})</code>. The easiest way to integrate this with Prefab is to use the <code>afterEvaluationCallback</code>.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> options </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">apiKey</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">prefab_api_key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">context</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">prefabNamespace</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">Context</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">user</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token literal-property property" style="color:#36acaa">key</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">tracking_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user_name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">afterEvaluationCallback</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">key</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">startsWith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;experiment&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// we&#x27;ll name our experiments to start with &#x27;experiment&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mixpanel</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">track</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;$experiment_started&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">&#x27;Experiment name&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">// this will be &#x27;experiment.ex-2.bigger-button&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">&#x27;Variant name&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> value             </span><span class="token comment" style="color:#999988;font-style:italic">// this will be &#x27;Control&#x27; or &#x27;Treatment&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We will of course need to actually call the experiment in our code.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">prefab</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;experiment.ex-2.bigger-button&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Treatment&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// do something new</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// do existing logic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>With that setup, we can run our application. 50% of users will see our new and 50% our existing logic.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="verifying-our-bucketing-evaluations">Verifying our Bucketing Evaluations<a href="#verifying-our-bucketing-evaluations" class="hash-link" aria-label="Direct link to Verifying our Bucketing Evaluations" title="Direct link to Verifying our Bucketing Evaluations">​</a></h2>
<p>A crucial part of bucketing is giving you confidence that the bucketing is happening as you expect. Prefab evaluation charts are very useful here. This is showing us that at our low amount of traffic in staging the 50%/50% split is really a 54%/46% split. We&#x27;ll expect to see this track to 50%/50% over time.
<img decoding="async" loading="lazy" alt="image" src="/assets/images/prefab-evaluations-160d8b593f85214069de0e287e244bf0.jpg" width="1507" height="1319" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="analyzing-our-experiment">Analyzing our Experiment<a href="#analyzing-our-experiment" class="hash-link" aria-label="Direct link to Analyzing our Experiment" title="Direct link to Analyzing our Experiment">​</a></h2>
<p>In Mixpanel, we can now setup a funnel report. The conversion event for this example will be an event  called <code>PrefabLandingPage</code> that we have triggered via basic <code>mixpanel.track(&#x27;PrefabLandingPage&#x27;);</code> calls.</p>
<p>Here&#x27;s the setup for our two step funnel:
<img decoding="async" loading="lazy" alt="image" src="/assets/images/mixpanel-steps-396566e0e682f4943ad6757323f01eff.jpg" width="619" height="543" class="img_ev3q"></p>
<p>We set the first step of the funnel to be the <code>Experiment Started</code> event, filtered to where the <code>Experiment Name</code> is <code>experiment.ex-2.bigger-button</code>.  The second event is conversion goal, in our example <code>PrefabLandingPage</code>.</p>
<p>The <strong>tricky part</strong> is that we can now do a &quot;conversion rate segmentation&quot; and &quot;breakdown&quot;. We want to segment on the value of <code>Variant Name</code> in <code>Step 1</code>. Here&#x27;s what that looks like:</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/mixpanel-breakdown-5789f5d18e0265a4399041485a38511b.jpg" width="612" height="726" class="img_ev3q"></p>
<p>Success! We can see our AB Test in it&#x27;s full glory. We can see that we have some separation in the conversion rate between the two arms. Mixpanel is actually labeling this as a significant conversion change.
<img decoding="async" loading="lazy" alt="image" src="/assets/images/mixpanel-significant-5b22bfd420652ac924f31470d65a9569.jpg" width="2214" height="1245" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing-experiments-locally">Testing Experiments Locally<a href="#testing-experiments-locally" class="hash-link" aria-label="Direct link to Testing Experiments Locally" title="Direct link to Testing Experiments Locally">​</a></h2>
<p>As a developer building out the new feature. It&#x27;s pretty common to want to be able to quickly toggle back and forth between the variants of your experiment. You could do this by just changing the development value, but that will affect everyone on your team.</p>
<p>Prefab&#x27;s <a href="/docs/tools/cli">developer tools</a> have you covered. Because the CLI knows who you are, it can easily add and remove a targeted override just for you. Here&#x27;s what that looks like:
<img decoding="async" loading="lazy" alt="image" src="/assets/images/prefab-cli-anim-49d7eca94f471cce4921ee54b80e5ae6.gif" width="885" height="243" class="img_ev3q"></p>
<p>And here&#x27;s the resulting rule that you&#x27;ll see in the Prefab UI.
<img decoding="async" loading="lazy" alt="image" src="/assets/images/exp-override-6317c4f4ed1c2aededc8dbee585de7c7.jpg" width="559" height="471" class="img_ev3q"></p>
<p>Happy experimenting!</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/prefab-cloud/prefab-cloud-docs-web/tree/main/docs/how-tos/experiment.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/how-tos/beta-releases"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Beta Releases</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/how-tos/feature-opt-in"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Feature Opt-In</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#using-prefab-for-experimentation--ab-testing" class="table-of-contents__link toc-highlight">Using Prefab for Experimentation &amp; AB Testing</a><ul><li><a href="#1-bucketing" class="table-of-contents__link toc-highlight">1) Bucketing</a></li><li><a href="#2-exposure-tracking" class="table-of-contents__link toc-highlight">2) Exposure Tracking</a></li><li><a href="#3-conversion--metric-tracking" class="table-of-contents__link toc-highlight">3) Conversion / Metric Tracking</a></li><li><a href="#4-analysis" class="table-of-contents__link toc-highlight">4) Analysis</a></li></ul></li><li><a href="#the-prefab-approach" class="table-of-contents__link toc-highlight">The Prefab Approach</a></li><li><a href="#example---setting-up-an-experiment-in-mixpanel" class="table-of-contents__link toc-highlight">Example - Setting up an Experiment in Mixpanel</a><ul><li><a href="#setting-up-exposure-tracking-mixpanel-example" class="table-of-contents__link toc-highlight">Setting up Exposure Tracking (Mixpanel example)</a></li></ul></li><li><a href="#verifying-our-bucketing-evaluations" class="table-of-contents__link toc-highlight">Verifying our Bucketing Evaluations</a></li><li><a href="#analyzing-our-experiment" class="table-of-contents__link toc-highlight">Analyzing our Experiment</a></li><li><a href="#testing-experiments-locally" class="table-of-contents__link toc-highlight">Testing Experiments Locally</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/get-started">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/prefab" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/prefabcloud" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/prefab-cloud" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Prefab Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>