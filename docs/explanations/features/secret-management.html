<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-explanations/features/secret-management">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Secret Management | Prefab Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.prefab.cloud/docs/explanations/features/secret-management"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Secret Management | Prefab Documentation"><meta data-rh="true" name="description" content="Prefab has zero-knowledge support for sharing your secrets between developers and between your different applications. We use simple &amp; straightforward cryptography and Prefab never sees anything unencrypted. This simplifies sharing secrets for local development and sharing secrets between multiple applications or languages because you only need a single encryption/decryption secret. (Multiple secrets is perfectly fine too, use as many as you require)."><meta data-rh="true" property="og:description" content="Prefab has zero-knowledge support for sharing your secrets between developers and between your different applications. We use simple &amp; straightforward cryptography and Prefab never sees anything unencrypted. This simplifies sharing secrets for local development and sharing secrets between multiple applications or languages because you only need a single encryption/decryption secret. (Multiple secrets is perfectly fine too, use as many as you require)."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.prefab.cloud/docs/explanations/features/secret-management"><link data-rh="true" rel="alternate" href="https://docs.prefab.cloud/docs/explanations/features/secret-management" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.prefab.cloud/docs/explanations/features/secret-management" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://I4HO5HDPCF-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CB91P8FVG3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-CB91P8FVG3",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Prefab Documentation" href="/opensearch.xml">

<link rel="preconnect" href="https://pwh.prefab.cloud">
<script>!function(t,e){var o,p,i,n;e.__SV||(window.posthog=e,e._i=[],e.init=function(r,s,a){function c(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(i=t.createElement("script")).type="text/javascript",i.async=!0,i.src=s.api_host+"/static/array.js",(n=t.getElementsByTagName("script")[0]).parentNode.insertBefore(i,n);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset".split(" "),p=0;p<o.length;p++)c(u,o[p]);e._i.push([r,s,a])},e.__SV=1)}(document,window.posthog||[]),posthog.init("phc_zbGOXnt4C5OR1aKcUFyH5DgA4N0h5wOsWIsPeAuu24B",{api_host:"https://pwh.prefab.cloud",id:"default"})</script>

<script id="hs-script-loader" async defer="defer" src="//js.hs-scripts.com/465416.js"></script><link rel="stylesheet" href="/assets/css/styles.ebe80241.css">
<link rel="preload" href="/assets/js/runtime~main.51b71458.js" as="script">
<link rel="preload" href="/assets/js/main.249ac8f9.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.prefab.cloud/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/logo.svg" alt="Prefab Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Prefab Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link text-white navbar__link--active" href="/">Prefab Docs Home</a><a href="https://app.prefab.cloud/users/sign_up" target="_blank" rel="noopener noreferrer" class="navbar__link">Create Account</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/tutorials">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/explanations">Explanations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Explanations&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/features">Features</a><button aria-label="Toggle the collapsible sidebar category &#x27;Features&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/explanations/features/targeted-log-levels">Targeted Log Levels</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/explanations/features/secret-management">Secret Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/explanations/features/rules-and-segmentation">Rules and Segmentation</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/concepts">Concepts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Concepts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/architecture">Architecture</a><button aria-label="Toggle the collapsible sidebar category &#x27;Architecture&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/how-tos">How Tos</a><button aria-label="Toggle the collapsible sidebar category &#x27;How Tos&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/tools">Tools</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tools&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/docs/category/sdks">SDKs</a><button aria-label="Toggle the collapsible sidebar category &#x27;SDKs&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdks/elixir">Elixir</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdks/java">Java</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdks/javascript">JavaScript</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/docs/sdks/node">Node</a><button aria-label="Toggle the collapsible sidebar category &#x27;Node&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdks/node/netlify">Netlify</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdks/python">Python</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdks/react-native">React Native</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdks/react">React</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdks/ruby">Ruby</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/explanations"><span itemprop="name">Explanations</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/features"><span itemprop="name">Features</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Secret Management</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Secret Management</h1></header><p>Prefab has zero-knowledge support for <a href="https://prefab.cloud/features/secret-management/" target="_blank" rel="noopener noreferrer">sharing your secrets</a> between developers and between your different applications. We use simple &amp; straightforward cryptography and Prefab never sees anything unencrypted. This simplifies sharing secrets for local development and sharing secrets between multiple applications or languages because you only need a single encryption/decryption secret. (Multiple secrets is perfectly fine too, use as many as you require).</p><p>Prefab owns: </p><ul><li>CLI to locally encrypt and push to Prefab</li><li>Distributing the encrypted values to your systems</li><li>SDKs to decrypt <code>Prefab.get(&quot;my-secret&quot;) =&gt; &quot;the message&quot;</code></li></ul><p>You own:</p><ul><li>Sharing the encryption/decryption secret(s) with the correct people / services</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-does-it-work">How Does It Work<a href="#how-does-it-work" class="hash-link" aria-label="Direct link to How Does It Work" title="Direct link to How Does It Work">​</a></h2><ol><li>You create a <code>secret key</code> with the CLI. This is a series of random bytes that you keep secret.</li><li>This <code>secret key</code> needs to be available on developer machines to encrypt and in deployed environments to decrypt, you do this via your existing process for sharing environment variables.</li><li>You use our <a href="/docs/tools/cli">CLI</a> to encrypt the string you want to keep secret. </li><li>Prefab will share the encrypted contents with your applications.</li><li>Your applications will decrypt the contents with the <code>secret key</code>.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-does-that-look-like">What Does That Look Like?<a href="#what-does-that-look-like" class="hash-link" aria-label="Direct link to What Does That Look Like?" title="Direct link to What Does That Look Like?">​</a></h2><p><a href="https://www.youtube.com/watch?v=el_IEDCfoIU" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://img.youtube.com/vi/el_IEDCfoIU/0.jpg" alt="YouTube" class="img_ev3q"></a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="walkthrough">Walkthrough<a href="#walkthrough" class="hash-link" aria-label="Direct link to Walkthrough" title="Direct link to Walkthrough">​</a></h2><p>Prefab secret management uses standard Prefab dynamic configuration to store and share your secrets between your applications.</p><p>In particular, it uses two special types of configuration attributes: <code>decryptWith</code> and <code>provided</code>. Let&#x27;s see how these work together.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-create-an-encryption-key">Step 1: Create an Encryption Key<a href="#step-1-create-an-encryption-key" class="hash-link" aria-label="Direct link to Step 1: Create an Encryption Key" title="Direct link to Step 1: Create an Encryption Key">​</a></h3><p>Prefab allows you to declare that a configuration value will be <em>&quot;provided by&quot;</em> an environment variable. Prefab will store a config that is kind of an empty vessel. It is a pointer that says &quot;find my value from this ENV VAR&quot;.</p><p>We want Prefab to have zero knowledge of your encryption key, so we&#x27;ll use these provided values so you don&#x27;t have to tell us the encryption key.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-provided-by-env-var-config">Create the Provided By Env Var Config<a href="#create-the-provided-by-env-var-config" class="hash-link" aria-label="Direct link to Create the Provided By Env Var Config" title="Direct link to Create the Provided By Env Var Config">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">prefab create prefab.secrets.encryption.key --env-var</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">PREFAB_SECRET_KEY_DEFAULT --type string --confidential</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This creates:</p><ol><li>A config called <code>prefab.secrets.encryption.key</code></li><li>That will resolve to <code>PREFAB_SECRET_KEY_DEFAULT</code></li><li>That won&#x27;t report/print the value because it&#x27;s <code>--confidential</code></li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="put-something-in-the-vessel-locally">Put something in the vessel locally<a href="#put-something-in-the-vessel-locally" class="hash-link" aria-label="Direct link to Put something in the vessel locally" title="Direct link to Put something in the vessel locally">​</a></h4><p>We&#x27;ll generate a secure series of random bytes to be our encryption key.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> prefab generate-new-hex-key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">17f65155e45a42777d89091e40cddc5541ac4851c44134f86db7a408a7fea5a8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now we put this into our environment using something like a <code>.env.local</code> file.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#.env.local</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">PREFAB_SECRET_KEY_DEFAULT</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">17f65155e45a42777d89091e40cddc5541ac4851c44134f86db7a408a7fea5a8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If we run our application now and call <code>Prefab.get(&quot;prefab.secrets.encryption.key&quot;)</code> we&#x27;ll get <code>17f65155e45a42777d89091e40cddc5541ac4851c44134f86db7a408a7fea5a8</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-encrypt-something">Step 2: Encrypt Something<a href="#step-2-encrypt-something" class="hash-link" aria-label="Direct link to Step 2: Encrypt Something" title="Direct link to Step 2: Encrypt Something">​</a></h2><h4 class="anchor anchorWithStickyNavbar_LWe7" id="encrypt-a-value">Encrypt a value<a href="#encrypt-a-value" class="hash-link" aria-label="Direct link to Encrypt a value" title="Direct link to Encrypt a value">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">prefab create my.api.key --type string --value</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;sample api key&quot;</span><span class="token plain"> --secret</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will:</p><ol><li>Assume that we are using the value of <code>prefab.secrets.encryption.key</code> to encrypt.</li><li>Pull the key from our environment.</li><li>Use that key to encrypt <code>sample api key</code></li><li>Push and encrypted blob to Prefab under the key <code>my.api.key</code></li></ol><p>Here&#x27;s a pictorial representation of what we&#x27;ve done so far</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-using-the-secret">Step 3: Using the Secret<a href="#step-3-using-the-secret" class="hash-link" aria-label="Direct link to Step 3: Using the Secret" title="Direct link to Step 3: Using the Secret">​</a></h2><p>Locally, we&#x27;re all set. We can use the language appropriate form of <code>Prefab.get(&quot;my.api.key&quot;)</code> and the library will decrypt our secret. </p><p>To use the secret in another environment, you just need to get <code>PREFAB_SECRET_KEY_DEFAULT=17f65155e45a42777d89091e40cddc5541ac4851c44134f86db7a408a7fea5a8</code>
set in that environment.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="separate-keys-for-different-environments">Separate Keys For Different Environments<a href="#separate-keys-for-different-environments" class="hash-link" aria-label="Direct link to Separate Keys For Different Environments" title="Direct link to Separate Keys For Different Environments">​</a></h2><p>So far, we&#x27;ve shared the same secret for development and staging, but it&#x27;s very likely you&#x27;ll want a different key for your production secrets. This is no problem. The nature of <code>provided</code> means that our <code>prefab.secrets.encryption.key</code> can resolve to different ENV vars in different environments.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="generate-a-second-secret">Generate a second secret<a href="#generate-a-second-secret" class="hash-link" aria-label="Direct link to Generate a second secret" title="Direct link to Generate a second secret">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> prefab generate-new-hex-key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">17f65155e45a42777d89091e40cddc5541ac4851c44134f86db7a408a7fea5a8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="put-that-secret-into-a-separate-env-var">Put that secret into a separate env var<a href="#put-that-secret-into-a-separate-env-var" class="hash-link" aria-label="Direct link to Put that secret into a separate env var" title="Direct link to Put that secret into a separate env var">​</a></h4><p>Why use a second env var? Well, you aren&#x27;t required to. You could share the same name for the env var in all your environments. </p><p>The trick is that this can make using the CLI locally more challenging. Locally, the CLI will need to be able to encrypt for both the default and production environments. We find it is easier to have them use different names so they don&#x27;t collide locally. Here&#x27;s what that looks like</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#.env.local</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">PREFAB_SECRET_KEY_DEFAULT</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">17f65155e45a42777d89091e40cddc5541ac4851c44134f86db7a408a7fea5a8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">PREFAB_SECRET_KEY_PRODUCTION</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">994899132443777d89091e40cddc5541abdeff123830488a7fea173b3b1b2b38</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="update-the-prefabsecretsencryptionkey-to-look-for-the-other-env-var-in-production">Update the prefab.secrets.encryption.key to look for the other ENV var in production<a href="#update-the-prefabsecretsencryptionkey-to-look-for-the-other-env-var-in-production" class="hash-link" aria-label="Direct link to Update the prefab.secrets.encryption.key to look for the other ENV var in production" title="Direct link to Update the prefab.secrets.encryption.key to look for the other ENV var in production">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ prefab change-default --confidential --env-var</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">PREFAB_SECRET_KEY_PRODUCTION              </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Which item would you like to change the default for? prefab.secrets.encryption.key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Which environment would you like to change the default for? Production</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Confirm: change the default </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> prefab.secrets.encryption.key </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> Production to be provided by </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">PREFAB_SECRET_KEY_PRODUCTION</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain">? yes/no: </span><span class="token function" style="color:#d73a49">yes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">✔ Successfully changed default to be provided by </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">PREFAB_SECRET_KEY_PRODUCTION</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">confidential</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is now the mapping of environment to ENV Var. </p><p>We can also see this by running <code>prefab info</code>.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ prefab info  prefab.secrets.encryption.key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Default: </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">PREFAB_SECRET_KEY_DEFAULT</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> via ENV</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Development: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">inherit</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Production: </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">PREFAB_SECRET_KEY_PRODUCTION</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> via ENV</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">No evaluations </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> the past </span><span class="token number" style="color:#36acaa">24</span><span class="token plain"> hours</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="set-a-secret-in-production">Set a Secret in Production<a href="#set-a-secret-in-production" class="hash-link" aria-label="Direct link to Set a Secret in Production" title="Direct link to Set a Secret in Production">​</a></h4><p>Finally, let&#x27;s set a production secret.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ prefab change-default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Which item would you like to change the default for? my.api.key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Which environment would you like to change the default for? Production</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Default value: sk_live_123</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Confirm: change the default </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> my.new.string </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> Production to </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">sk_live_123</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain">? yes/no: </span><span class="token function" style="color:#d73a49">yes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">✔ Successfully changed default to </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">sk_live_123</span><span class="token variable" style="color:#36acaa">`</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Note: You can use as many encryption keys as you want. It is a common practice to have 2, one for production and one for all other environments. But you can have as many secrets as you need in order to align with the trust groups you require.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="full-example-diagram">Full Example Diagram<a href="#full-example-diagram" class="hash-link" aria-label="Direct link to Full Example Diagram" title="Direct link to Full Example Diagram">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-should-i-get-the-actual-secret-keys-passed-around">How should I get the actual Secret keys passed around.<a href="#how-should-i-get-the-actual-secret-keys-passed-around" class="hash-link" aria-label="Direct link to How should I get the actual Secret keys passed around." title="Direct link to How should I get the actual Secret keys passed around.">​</a></h2><p>In order to share the <code>PREFAB_SECRET_KEY_DEFAULT</code> with developers, you can use a password manager such as 1Password or you can use one of the secure 1-time password sharing website like <a href="https://1ty.me/" target="_blank" rel="noopener noreferrer">1ty.me</a> <a href="https://onetimesecret.com/" target="_blank" rel="noopener noreferrer">onetimesecret</a> or <a href="https://password.link/" target="_blank" rel="noopener noreferrer">password.link</a>.</p><p>This will be the only secret you ever need to share amongst your developers going forward. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-do-secrets-work-in--ci">How do secrets work in  CI?<a href="#how-do-secrets-work-in--ci" class="hash-link" aria-label="Direct link to How do secrets work in  CI?" title="Direct link to How do secrets work in  CI?">​</a></h2><p>Because Prefab secret management uses the regular dynamic configuration, you&#x27;ll use the same techniques to run in continuous integration environments which may be offline. The full guide is available in <a href="/docs/explanations/concepts/testing">Testing</a>. The only thing you&#x27;ll need to remember is to make <code>PREFAB_SECRET_KEY_DEFAULT</code> available to processes in CI.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/prefab-cloud/prefab-cloud-docs-web/tree/main/docs/explanations/features/secret-management.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/explanations/features/targeted-log-levels"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Targeted Log Levels</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/explanations/features/rules-and-segmentation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Rules and Segmentation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-does-it-work" class="table-of-contents__link toc-highlight">How Does It Work</a></li><li><a href="#what-does-that-look-like" class="table-of-contents__link toc-highlight">What Does That Look Like?</a></li><li><a href="#walkthrough" class="table-of-contents__link toc-highlight">Walkthrough</a><ul><li><a href="#step-1-create-an-encryption-key" class="table-of-contents__link toc-highlight">Step 1: Create an Encryption Key</a><ul><li><a href="#create-the-provided-by-env-var-config" class="table-of-contents__link toc-highlight">Create the Provided By Env Var Config</a></li><li><a href="#put-something-in-the-vessel-locally" class="table-of-contents__link toc-highlight">Put something in the vessel locally</a></li></ul></li></ul></li><li><a href="#step-2-encrypt-something" class="table-of-contents__link toc-highlight">Step 2: Encrypt Something</a><ul><li><a href="#encrypt-a-value" class="table-of-contents__link toc-highlight">Encrypt a value</a></li></ul></li><li><a href="#step-3-using-the-secret" class="table-of-contents__link toc-highlight">Step 3: Using the Secret</a></li><li><a href="#separate-keys-for-different-environments" class="table-of-contents__link toc-highlight">Separate Keys For Different Environments</a><ul><li><a href="#generate-a-second-secret" class="table-of-contents__link toc-highlight">Generate a second secret</a></li><li><a href="#put-that-secret-into-a-separate-env-var" class="table-of-contents__link toc-highlight">Put that secret into a separate env var</a></li><li><a href="#update-the-prefabsecretsencryptionkey-to-look-for-the-other-env-var-in-production" class="table-of-contents__link toc-highlight">Update the prefab.secrets.encryption.key to look for the other ENV var in production</a></li><li><a href="#set-a-secret-in-production" class="table-of-contents__link toc-highlight">Set a Secret in Production</a></li></ul></li><li><a href="#full-example-diagram" class="table-of-contents__link toc-highlight">Full Example Diagram</a></li><li><a href="#how-should-i-get-the-actual-secret-keys-passed-around" class="table-of-contents__link toc-highlight">How should I get the actual Secret keys passed around.</a></li><li><a href="#how-do-secrets-work-in--ci" class="table-of-contents__link toc-highlight">How do secrets work in  CI?</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/get-started">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/prefab" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/prefabcloud" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/prefab-cloud" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Prefab Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.51b71458.js"></script>
<script src="/assets/js/main.249ac8f9.js"></script>
</body>
</html>