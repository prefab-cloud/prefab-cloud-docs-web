"use strict";(self.webpackChunkprefab_cloud_docs_web=self.webpackChunkprefab_cloud_docs_web||[]).push([[3230],{2146:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>s,metadata:()=>r,toc:()=>c});var a=t(4848),o=t(8453);const s={title:"How Backend SDKs Work",sidebar_label:"Backend SDKs",sidebar_position:1},i=void 0,r={id:"explanations/concepts/backend-sdks",title:"How Backend SDKs Work",description:"SDK Architecture",source:"@site/docs/explanations/concepts/backend-sdks.md",sourceDirName:"explanations/concepts",slug:"/explanations/concepts/backend-sdks",permalink:"/docs/explanations/concepts/backend-sdks",draft:!1,unlisted:!1,editUrl:"https://github.com/prefab-cloud/prefab-cloud-docs-web/tree/main/docs/explanations/concepts/backend-sdks.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"How Backend SDKs Work",sidebar_label:"Backend SDKs",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Concepts",permalink:"/docs/category/concepts"},next:{title:"Frontend SDKs",permalink:"/docs/explanations/concepts/frontend-sdks"}},l={},c=[{value:"SDK Architecture",id:"sdk-architecture",level:2},{value:"Implementation",id:"implementation",level:2}];function d(e){const n={a:"a",h2:"h2",li:"li",mermaid:"mermaid",ol:"ol",p:"p",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"sdk-architecture",children:"SDK Architecture"}),"\n",(0,a.jsx)(n.p,{children:"The Prefab server-side SDKs are all built with the following 3 goals in mind:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Very fast lookups that do not require any remote calls."}),"\n",(0,a.jsx)(n.li,{children:"Being highly resilient in the case of outages"}),"\n",(0,a.jsx)(n.li,{children:"Near instant updates when changes are made"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"The architecture to do this looks like this:"}),"\n",(0,a.jsx)(n.mermaid,{value:'flowchart RL\n    subgraph "Your Server"\n        subgraph "Your Code"\n            code[feature_flag.isEnabled?<br> my-flag, context]\n        end\n\n        subgraph "Prefab Backend SDK"\n            Evaluation\n            ConfigCache\n        end\n\n        code --\x3e Evaluation\n    end\n\n\n    subgraph "Prefab API"\n        subgraph "API"\n            BulkAPI["Bulk API"]\n            StreamingAPI["Streaming API"]\n        end\n\n        subgraph "Datastores"\n            GoogleSpanner[("Google Spanner")]\n        end\n    end\n\n    BulkAPI --\x3e CDN\n    BulkAPI --\x3e ConfigCache\n    StreamingAPI --\x3e ConfigCache\n    Evaluation --\x3e code\n    ConfigCache --\x3e Evaluation\n    Evaluation --\x3e  ConfigCache\n    CDN --\x3e ConfigCache'}),"\n",(0,a.jsx)(n.p,{children:"Your code will instantiate a singleton of a Prefab Client. This client starts will fetch the latest configuration, trying\nmultiple sources in case of errors. Once it gets a connection it will unlock and be available for your code."}),"\n",(0,a.jsx)(n.p,{children:"The client will also start a streaming connection to the APIs to pull down new changes."}),"\n",(0,a.jsx)(n.p,{children:"Additionally, the SDK will poll for updates as a resiliency measure."}),"\n",(0,a.jsx)(n.p,{children:"Note that the evaluation is always happening in-process in your application.\nFeature flags and config are stored in process so are lightning fast (no API calls when you access them)."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"/docs/explanations/concepts/frontend-sdks",children:"See Frontend SDKs to compare"})}),"\n",(0,a.jsx)(n.h2,{id:"implementation",children:"Implementation"}),"\n",(0,a.jsx)(n.p,{children:"When your client boots, it creates a local thread safe hashmap which will hold the config.\nThe general purpose Prefab config system will then push & pull changes down to your clients.\nThe expected latency is < 100 ms."}),"\n",(0,a.jsx)(n.p,{children:"Feature flags are built on top of the Prefab config store so all reliability notes are applicable for Feature Flags as well."})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>r});var a=t(6540);const o={},s=a.createContext(o);function i(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);