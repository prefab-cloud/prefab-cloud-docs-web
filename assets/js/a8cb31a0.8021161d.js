"use strict";(self.webpackChunkprefab_cloud_docs_web=self.webpackChunkprefab_cloud_docs_web||[]).push([[9056],{5365:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>d});var o=n(4848),r=n(8453);const a={title:"Zero-Millisecond Frontend Feature Flags",sidebar_label:"Zero-ms Frontend Feature Flags",sidebar_position:5},s=void 0,i={id:"explanations/concepts/zero-ms-frontend-feature-flags",title:"Zero-Millisecond Frontend Feature Flags",description:"Prefab believes that frontend performance is critical to a great user experience. We've designed our frontend SDKs to be as fast as possible to ensure your users have a great experience.",source:"@site/docs/explanations/concepts/zero-ms-frontend-feature-flags.md",sourceDirName:"explanations/concepts",slug:"/explanations/concepts/zero-ms-frontend-feature-flags",permalink:"/docs/explanations/concepts/zero-ms-frontend-feature-flags",draft:!1,unlisted:!1,editUrl:"https://github.com/prefab-cloud/prefab-cloud-docs-web/tree/main/docs/explanations/concepts/zero-ms-frontend-feature-flags.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"Zero-Millisecond Frontend Feature Flags",sidebar_label:"Zero-ms Frontend Feature Flags",sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Testing",permalink:"/docs/explanations/concepts/testing"},next:{title:"JavaScript SSR & Hybrid Apps",permalink:"/docs/explanations/concepts/SSR-and-hybrid-apps"}},l={},d=[{value:"Without Zero-Millisecond Feature flags",id:"without-zero-millisecond-feature-flags",level:2},{value:"Bootstrap Mode",id:"bootstrap-mode",level:2},{value:"Stub Mode",id:"stub-mode",level:2}];function c(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",mermaid:"mermaid",p:"p",pre:"pre",...(0,r.R)(),...e.components},{TabItem:n,Tabs:a}=t;return n||p("TabItem",!0),a||p("Tabs",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t.p,{children:["Prefab believes that frontend performance is critical to a great user experience. We've ",(0,o.jsx)(t.a,{href:"../concepts/frontend-sdks",children:"designed our frontend SDKs"})," to be as fast as possible to ensure your users have a great experience."]}),"\n",(0,o.jsx)(t.p,{children:"But no matter how fast our global delivery system is, it still requires an HTTP request to get the feature flag and config evaluations from our server, and every HTTP request is a performance hit where the user is left waiting. We want to help you avoid that."}),"\n",(0,o.jsx)(t.p,{children:"Starting with our Ruby client, we're introducing zero-ms feature flags. This feature allows you to send your feature flag evaluations from your backend to your frontend, saving your users an HTTP request and enabling you to run offline without any changes to your frontend code."}),"\n",(0,o.jsx)(t.p,{children:"This comes in two flavors: Stub mode and Bootstrapping mode."}),"\n",(0,o.jsx)(t.admonition,{type:"note",children:(0,o.jsx)(t.p,{children:"Zero-ms feature flags are currently available in our Ruby client. We're working on adding this feature to our other clients. If you\u2019re interested in this feature for another client, contact us via the chat widget in the bottom corner of the page."})}),"\n",(0,o.jsx)(t.h2,{id:"without-zero-millisecond-feature-flags",children:"Without Zero-Millisecond Feature flags"}),"\n",(0,o.jsx)(t.p,{children:"To understand the value of zero-ms feature flags, let's look at the behavior of HTTP-based frontend feature flag evaluations."}),"\n",(0,o.jsxs)(t.p,{children:["This is a fine design, and we've taken ",(0,o.jsx)(t.a,{href:"../concepts/frontend-sdks",children:"great pains"})," to make it as fast as possible. But the user has to wait for the HTTP request to complete before the final content is shown. You can either show the original content or a spinner while the user waits for the response. This performance hit can lead to a FOOC (flash of original content)."]}),"\n",(0,o.jsx)(t.mermaid,{value:'graph TD\nsubgraph App["Your App"]\n  A["Server"]\n  B["Initial HTML Content"]\n  C["Javascript"]\n  E\nend\n\nA --\x3e B\nB --\x3e C\nC --HTTP Request--\x3eD["Prefab API"]\nD --Evaluations--\x3e C\nC --\x3e E["Final Content"]\n'}),"\n",(0,o.jsx)(t.h2,{id:"bootstrap-mode",children:"Bootstrap Mode"}),"\n",(0,o.jsx)(t.p,{children:"Choose bootstrapping mode if you're already using one of our frontend SDKs and want to keep the reactivity of our SDKs when context changes due to frontend context enrichment."}),"\n",(0,o.jsx)(t.p,{children:"The user doesn't have to wait for an HTTP request to complete. The content is shown immediately. The feature flags and config values are bootstrapped into the page and evaluated server-side. The developer gets the full power of the JavaScript/React clients, and the client can still update the values as needed if the context changes."}),"\n",(0,o.jsx)(t.mermaid,{value:'graph TD\n  subgraph App["Your App"]\n    A["Server"]\n    B["Initial HTML Content w/ Prefab JS Bootstrapping"]\n    C["Javascript"]\n    E\n  end\n\n    A --\x3e B\n    B --\x3e C\n    C -.as-needed HTTP Request.->D["Prefab API"]\n    D -.Evaluations.-> C\n    C --\x3e E["Final Content"]'}),"\n",(0,o.jsx)(a,{groupId:"lang",children:(0,o.jsxs)(n,{value:"ruby",label:"Ruby",children:[(0,o.jsxs)(t.p,{children:["Just invoke the ",(0,o.jsx)(t.code,{children:"bootstrap_javascript"})," method in your view with the current user's context:"]}),(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-erb",children:"<%== Prefab.bootstrap_javascript(context) %>\n"})})]})}),"\n",(0,o.jsx)(t.h2,{id:"stub-mode",children:"Stub Mode"}),"\n",(0,o.jsxs)(t.p,{children:["Choose stub mode if you don't want to use our ",(0,o.jsx)(t.a,{href:"../../sdks/javascript",children:"JavaScript"})," or ",(0,o.jsx)(t.a,{href:"../../sdks/react",children:"React"})," SDKs. Stub mode gives you a global ",(0,o.jsx)(t.code,{children:"window.prefab"})," object to call ",(0,o.jsx)(t.code,{children:"get"})," and ",(0,o.jsx)(t.code,{children:"isEnabled"})," on the client side."]}),"\n",(0,o.jsx)(t.p,{children:"This will give you feature flags and config values for your current context. You can optionally provide a callback to record experiment exposures or other metrics. No HTTP request or SDK is needed!"}),"\n",(0,o.jsx)(t.mermaid,{value:'\ngraph TD\n  subgraph App["Your App"]\n    A["Server"]\n    B["Initial HTML Content w/ Prefab JS Stub"]\n    C["Javascript"]\n    E\n  end\n\n    A --\x3e B\n    B --\x3e C\n    C --\x3e E["Final Content"]\n'}),"\n",(0,o.jsx)(a,{groupId:"lang",children:(0,o.jsxs)(n,{value:"ruby",label:"Ruby",children:[(0,o.jsxs)(t.p,{children:["Just invoke the ",(0,o.jsx)(t.code,{children:"generate_javascript_stub"})," method in your view with the current user's context:"]}),(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-erb",children:"<%= Prefab.generate_javascript_stub(context, callback = nil) %>\n"})})]})})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}function p(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},8453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>i});var o=n(6540);const r={},a=o.createContext(r);function s(e){const t=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),o.createElement(a.Provider,{value:t},e.children)}}}]);