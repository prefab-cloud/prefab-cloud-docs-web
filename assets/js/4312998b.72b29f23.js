"use strict";(self.webpackChunkprefab_cloud_docs_web=self.webpackChunkprefab_cloud_docs_web||[]).push([[407],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>d});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=c(n),d=r,f=m["".concat(s,".").concat(d)]||m[d]||p[d]||o;return n?a.createElement(f,i(i({ref:t},u),{},{components:n})):a.createElement(f,i({ref:t},u))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(7294),r=n(6010);const o="tabItem_Ymn6";function i(e){let{children:t,hidden:n,className:i}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(o,i),hidden:n},t)}},5488:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(7462),r=n(7294),o=n(6010),i=n(2389),l=n(7392),s=n(7094),c=n(2466);const u="tabList__CuJ",p="tabItem_LNqP";function m(e){var t,n;const{lazy:i,block:m,defaultValue:d,values:f,groupId:b,className:v}=e,g=r.Children.map(e.children,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),h=null!=f?f:g.map((e=>{let{props:{value:t,label:n,attributes:a}}=e;return{value:t,label:n,attributes:a}})),y=(0,l.l)(h,((e,t)=>e.value===t.value));if(y.length>0)throw new Error('Docusaurus error: Duplicate values "'+y.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.');const w=null===d?d:null!=(t=null!=d?d:null==(n=g.find((e=>e.props.default)))?void 0:n.props.value)?t:g[0].props.value;if(null!==w&&!h.some((e=>e.value===w)))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+w+'" but none of its children has the corresponding value. Available values are: '+h.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");const{tabGroupChoices:C,setTabGroupChoices:k}=(0,s.U)(),[P,O]=(0,r.useState)(w),N=[],{blockElementScrollPositionUntilNextRender:T}=(0,c.o5)();if(null!=b){const e=C[b];null!=e&&e!==P&&h.some((t=>t.value===e))&&O(e)}const x=e=>{const t=e.currentTarget,n=N.indexOf(t),a=h[n].value;a!==P&&(T(t),O(a),null!=b&&k(b,String(a)))},E=e=>{var t;let n=null;switch(e.key){case"ArrowRight":{var a;const t=N.indexOf(e.currentTarget)+1;n=null!=(a=N[t])?a:N[0];break}case"ArrowLeft":{var r;const t=N.indexOf(e.currentTarget)-1;n=null!=(r=N[t])?r:N[N.length-1];break}}null==(t=n)||t.focus()};return r.createElement("div",{className:(0,o.Z)("tabs-container",u)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":m},v)},h.map((e=>{let{value:t,label:n,attributes:i}=e;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:P===t?0:-1,"aria-selected":P===t,key:t,ref:e=>N.push(e),onKeyDown:E,onFocus:x,onClick:x},i,{className:(0,o.Z)("tabs__item",p,null==i?void 0:i.className,{"tabs__item--active":P===t})}),null!=n?n:t)}))),i?(0,r.cloneElement)(g.filter((e=>e.props.value===P))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},g.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==P})))))}function d(e){const t=(0,i.Z)();return r.createElement(m,(0,a.Z)({key:String(t)},e))}},1589:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>d,frontMatter:()=>l,metadata:()=>c,toc:()=>p});var a=n(7462),r=(n(7294),n(3905)),o=n(5488),i=n(5162);const l={title:"Namespaces",sidebar_label:"Namespaces",sidebar_position:4},s=void 0,c={unversionedId:"explanations/namespaces",id:"explanations/namespaces",title:"Namespaces",description:"Namespaces",source:"@site/docs/explanations/namespaces.md",sourceDirName:"explanations",slug:"/explanations/namespaces",permalink:"/prefab-cloud-docs-web/docs/explanations/namespaces",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/explanations/namespaces.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"Namespaces",sidebar_label:"Namespaces",sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Rules and Segmentation",permalink:"/prefab-cloud-docs-web/docs/explanations/rules-and-segmentation"},next:{title:"Testing",permalink:"/prefab-cloud-docs-web/docs/explanations/testing"}},u={},p=[],m={toc:p};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Namespaces\nNamespaces allow you to share config amongst many applications while still allowing you to override when necessary."),(0,r.kt)("p",null,"For instance, let's assume that all our code shares an HTTP library. We can configure the HTTP library to get its retry count & timeout duration from our config store. We'll set http.connection.retries and http.connection.timeout in the default namespace."),(0,r.kt)("p",null,"All of our apps should initialize their config store in a namespace. For instance our User Service can ",(0,r.kt)("inlineCode",{parentName:"p"},'Prefab::Client.new(Prefab::Options.new(namespace: "userservice"))'),'. Prefab config will find the "closest" matching config when the UserService goes to look for a value of http.connection.timeout. By default that will match the global namespace.'),(0,r.kt)("p",null,"Let's imagine that the UserService starts to go down because too many requests are timing out to a 3rd party service. We can quickly reduce the http.connection.timeout for our userservice namespace and solve the issue without pushing code or restarting."),(0,r.kt)(o.Z,{groupId:"lang",mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"ruby",label:"Ruby",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ruby"},'client = Prefab::Client.new(Prefab::Options.new(namespace: "userservice"))\nclient.get("http.connection.timeout") # returns 10\n\nclient = Prefab::Client.new(Prefab::Options.new(namespace: "paymentservice"))\nclient.get("http.connection.timeout") # returns 30\n\nclient = Prefab::Client.new(Prefab::Options.new(namespace: "userservice.background_job"))\nclient.get("http.connection.timeout") # returns 50\n\n#an undefined namespace like "userservice.api" will get the "closest" value\n#in this case that is the value of "userservice"\nclient = Prefab::Client.new(Prefab::Options.new(namespace: "userservice.api"))\nclient.get("http.connection.timeout") # returns 10\n'))),(0,r.kt)(i.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'configClient = new PrefabCloudClient(new PrefabCloudClient.Builder()\n    .setNamespace("userservice")).configClient();\nconfigClient.get("http.connection.timeout") // returns 10\n\nconfigClient = new PrefabCloudClient(new PrefabCloudClient.Builder()\n    .setNamespace("paymentservice")).configClient();\nconfigClient.get("http.connection.timeout") // returns 30\n\nconfigClient = new PrefabCloudClient(new PrefabCloudClient.Builder()\n    .setNamespace("userservice.background_job")).configClient();\nconfigClient.get("http.connection.timeout") // returns 50\n\n// an undefined namespace like "userservice.api" will get the "closest" value\n// in this case that is the value of "userservice"\nconfigClient = new PrefabCloudClient(new PrefabCloudClient.Builder()\n    .setNamespace("userservice.api")).configClient();\nconfigClient.get("http.connection.timeout") // returns 10\n'))),(0,r.kt)(i.Z,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"import prefab, { Identity } from '@prefab-cloud/prefab-cloud-js'\n\nconst options = { apiKey: 'YOUR_CLIENT_API_KEY', namespace: \"userservice\", identity: new Identity('user-1234', { device: 'desktop' }) };\nawait prefab.init(options);\n\nprefab.get(\"http.connection.timeout\"); //returns 10\n\n// Changing namespaces requires you to `init` again.\noptions.namespace = 'paymentservice';\nawait prefab.init(options);\n\nprefab.get(\"http.connection.timeout\"); //returns 30\n")))))}d.isMDXComponent=!0}}]);